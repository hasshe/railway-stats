app:
  crypto:
    secret: ${CRYPTO_SECRET}
    salt: ${CRYPTO_SALT}
  admin:
    password: ${ADMIN_PASSWORD}

spring:
  datasource:
    url: ${DB_URL}
    driverClassName: org.postgresql.Driver
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    hikari:
      maximum-pool-size: 3
      minimum-idle: 1
      connection-timeout: 20000
      idle-timeout: 300000
      max-lifetime: 600000
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format_sql: false
        jdbc:
          batch_size: 20
          fetch_size: 50
    open-in-view: false          # Prevents large persistence context from consuming memory
    show-sql: false              # Disable SQL logging to save memory
logging:
  level:
    org.hibernate.SQL: OFF        # Disable Hibernate SQL logs

h2:
  console:
    enabled: false

server:
  tomcat:
    threads:
      min-spare: 1
      max: 5
    max-connections: 15          # Reduce max connections to limit memory spikes
    accept-count: 10

vaadin:
  launch-browser: false
  production-mode: true
  heartbeat-interval: 300
  close-idle-sessions: true